<script>
  const yesButton = document.getElementById("yes");
  const noButton = document.getElementById("no");
  const questionText = document.getElementById("question");
  const mainImage = document.getElementById("mainImage");

  let clickCount = 0;
  let yesScale   = 1;

  const step = 1.5;
  const autoTriggerScale = 8; // 落在第5次(7.59)与第6次(11.39)之间 → 第6次触发
  const maxTranslateX = 350;
  const maxMoveUp     = 200;

  const noTexts = [
    "对不起，我知道错了",
    "零花钱都给你",
    "就原谅一次呗宝宝",
    "能不能给个台阶嘛",
    "原谅我嘛，对不起"
  ];

  // 预加载
  ["rencuo.png","geiqian.png","duoqilai.png","weiqu.png","crying.png","hug.png"]
    .forEach(name => { const i = new Image(); i.src = name; });

  function updateYesScale(nextScale) {
    yesScale = nextScale;
    yesButton.style.transform = `scale(${yesScale})`;
    if (yesScale + 1e-9 >= autoTriggerScale) {
      enterSuccessScreen();
    }
  }

  function enterSuccessScreen() {
    document.body.innerHTML = `
      <div class="yes-screen">
        <h1 class="yes-text">!!!喜欢你!! ( >᎑<)♡︎ᐝ</h1>
        <img src="./hug.png" alt="拥抱" class="yes-image"
             onerror="this.alt='谢谢宝宝的原谅！'+this.src">
      </div>
    `;
    document.body.style.overflow = "hidden";
  }

  noButton.addEventListener("click", function (e) {
    // 如有需要，防止同一指针事件重复触发
    // e.stopPropagation();

    clickCount += 1;
    const nextScale = yesScale * step;     // 乘法增长（只保留这一种）
    updateYesScale(nextScale);

    const noOffset = Math.min(clickCount * 70, maxTranslateX);
    noButton.style.transform = `translateX(${noOffset}px)`;

    const moveUp = Math.min(clickCount * 25, maxMoveUp);
    mainImage.style.transform = `translateY(-${moveUp}px)`;
    questionText.style.transform = `translateY(-${moveUp}px)`;

    if (clickCount <= noTexts.length) {
      noButton.innerText = noTexts[clickCount - 1];
    }

    if (clickCount === 1) mainImage.src = "rencuo.png";
    if (clickCount === 2) mainImage.src = "geiqian.png";
    if (clickCount === 3) mainImage.src = "duoqilai.png";
    if (clickCount === 4) mainImage.src = "weiqu.png";
    if (clickCount >= 5) mainImage.src = "crying.png";
  });

  yesButton.addEventListener("click", enterSuccessScreen);
</script>




